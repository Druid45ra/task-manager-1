(this["webpackJsonptask-manager"]=this["webpackJsonptask-manager"]||[]).push([[0],{28:function(e,t,a){},40:function(e,t,a){"use strict";a.r(t);var s=a(1),n=a.n(s),c=a(22),r=a.n(c),i=(a(28),a(9)),o=a(13),l=a(4),j=a(2);var d=()=>Object(j.jsx)("header",{children:Object(j.jsx)("h1",{children:"Task Manager"})});var b=e=>{let{task:t}=e;return Object(j.jsxs)("div",{children:[Object(j.jsx)("h3",{children:t.title}),Object(j.jsx)("p",{children:t.description})]})};var h=e=>{let{tasks:t,onDelete:a,onToggle:s}=e;return Object(j.jsx)(j.Fragment,{children:t.length>0?t.map((e=>Object(j.jsx)(b,{task:e,onDelete:a,onToggle:s},e.id))):Object(j.jsx)("p",{children:"No tasks to show"})})};var p=e=>{let{onAdd:t}=e;const[a,n]=Object(s.useState)(""),[c,r]=Object(s.useState)("");return Object(j.jsxs)("form",{onSubmit:e=>{e.preventDefault(),a?(t({task:a,description:c}),n(""),r("")):alert("Please add a task")},children:[Object(j.jsxs)("div",{children:[Object(j.jsx)("label",{children:"Task"}),Object(j.jsx)("input",{type:"text",placeholder:"Add Task",value:a,onChange:e=>n(e.target.value)})]}),Object(j.jsxs)("div",{children:[Object(j.jsx)("label",{children:"Description"}),Object(j.jsx)("input",{type:"text",placeholder:"Add Description",value:c,onChange:e=>r(e.target.value)})]}),Object(j.jsx)("input",{type:"submit",value:"Save Task"})]})};var u=()=>{const[e,t]=Object(s.useState)(""),[a,n]=Object(s.useState)(""),[c,r]=Object(s.useState)(""),[i,o]=Object(s.useState)(""),d=Object(l.f)();return Object(j.jsxs)("form",{onSubmit:async t=>{if(t.preventDefault(),c!==i)return void alert("Passwords do not match");const s={name:e,email:a,password:c};try{(await fetch("/api/users/register",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(s)})).ok?d.push("/login"):alert("Failed to register")}catch(n){console.error("Error:",n),alert("Failed to register")}},children:[Object(j.jsxs)("div",{children:[Object(j.jsx)("label",{children:"Name"}),Object(j.jsx)("input",{type:"text",placeholder:"Enter name",value:e,onChange:e=>t(e.target.value)})]}),Object(j.jsxs)("div",{children:[Object(j.jsx)("label",{children:"Email"}),Object(j.jsx)("input",{type:"email",placeholder:"Enter email",value:a,onChange:e=>n(e.target.value)})]}),Object(j.jsxs)("div",{children:[Object(j.jsx)("label",{children:"Password"}),Object(j.jsx)("input",{type:"password",placeholder:"Enter password",value:c,onChange:e=>r(e.target.value)})]}),Object(j.jsxs)("div",{children:[Object(j.jsx)("label",{children:"Confirm Password"}),Object(j.jsx)("input",{type:"password",placeholder:"Confirm password",value:i,onChange:e=>o(e.target.value)})]}),Object(j.jsx)("input",{type:"submit",value:"Register"})]})};var O=a(42).a.create({baseURL:"http://localhost:5000/api"});const x=Object(s.createContext)();var g=()=>{const[e,t]=Object(s.useState)(""),[a,n]=Object(s.useState)(""),{login:c}=Object(s.useContext)(x),r=Object(l.f)();return Object(j.jsxs)("form",{onSubmit:async t=>{t.preventDefault();try{const t=await O.post("/auth/login",{email:e,password:a});c(t.data.token),r.push("/dashboard")}catch(s){alert("Login failed")}},children:[Object(j.jsx)("input",{type:"email",placeholder:"Email",value:e,onChange:e=>t(e.target.value)}),Object(j.jsx)("input",{type:"password",placeholder:"Password",value:a,onChange:e=>n(e.target.value)}),Object(j.jsx)("button",{type:"submit",children:"Login"})]})};var v=()=>{const[e,t]=Object(s.useState)([]);Object(s.useEffect)((()=>{(async()=>{const e=await a();t(e)})()}),[]);const a=async()=>{const e=await fetch("/api/tasks");return await e.json()},n=async e=>{const t=await fetch("/api/tasks/".concat(e));return await t.json()};return Object(j.jsx)(o.a,{children:Object(j.jsxs)("div",{className:"container",children:[Object(j.jsx)(d,{}),Object(j.jsxs)(l.c,{children:[Object(j.jsx)(l.a,{path:"/register",component:u}),Object(j.jsx)(l.a,{path:"/login",component:g}),Object(j.jsxs)(l.a,{path:"/dashboard",children:[Object(j.jsx)(h,{tasks:e,onDelete:async a=>{await fetch("/api/tasks/".concat(a),{method:"DELETE"}),t(e.filter((e=>e.id!==a)))},onToggle:async e=>{const t=await n(e),a=Object(i.a)(Object(i.a)({},t),{},{reminder:!t.reminder}),s=await fetch("/api/tasks/".concat(e),{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(a)});await s.json()}}),Object(j.jsx)(p,{onAdd:async a=>{const s=await fetch("/api/tasks",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(a)}),n=await s.json();t([...e,n])}})]})]})]})})};r.a.render(Object(j.jsx)(n.a.StrictMode,{children:Object(j.jsx)(v,{})}),document.getElementById("root"))}},[[40,1,2]]]);
//# sourceMappingURL=main.5a4fb8ee.chunk.js.map